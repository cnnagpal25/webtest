var rest = require('restler');

Mailin = rest.service(function(base_url,api_key) {
	this.base_url = base_url;
	this.api_key = api_key;
},{},{
do_request:function(resource,method,input) {
	var called_url = this.base_url + "/" + resource;
	console.log("called_url is"+JSON.stringify(called_url));
	var content_type = "application/json";
	// Make the call
	return this.request(called_url,{method:method,headers:{'api-key':this.api_key,"content-type":content_type},data:input});
},
get_request:function(resource,input) {
	console.log("resource is"+JSON.stringify(resource));
	console.log("input is"+JSON.stringify(input));
	return this.do_request(resource,"GET",input);
},
post_request:function(resource,input) {
        return this.do_request(resource,"POST",input);
},
put_request:function(resource,input) {
        return this.do_request(resource,"PUT",input);
},
delete_request:function(resource,input) {
        return this.do_request(resource,"DELETE",input);
},
get_lists:function(data) {
	console.log("inside get_lists");
	return this.get_request("list",JSON.stringify(data));
},
post_lists:function(data){
	console.log("inside post_lists");
	return this.post_request("list",JSON.stringify(data));
},
post_items:function(data){
return this.post_request("items",JSON.stringify(data));	
},
get_record_update:function(data){
	return this.get_request("getUpdatedItems",JSON.stringify(data));
},
get_record:function(data){
	return this.get_request("getItems",JSON.stringify(data));
}
});

